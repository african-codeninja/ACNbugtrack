@using ACNbugtracker.Models;
@using ACNbugtracker.Helper;
@using ACNbugtracker.ViewModels;

@model IEnumerable<UserProfileViewModel>
@{
    var roleHelper = new UserRolesHelper();

    var projectHelper = new ProjectsHelper();
}

    <div class="content mt-3">
        <div class="animated fadeIn">
            <div class="row">

                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header">
                            <strong class="card-title">APP USER INDEX</strong>
                        </div>
                        <div class="card-body">
                            <table id="bootstrap-data-table-export" class="table table-striped table-bordered table-responsive-sm">
                                <thead>
                                    <tr class="card-header">
                                        <th>Avatar</th>
                                        <th>Email</th>
                                        <th>First Name</th>
                                        <th>Last Name</th>
                                        <th>Current Role</th>
                                        @*<th>Current Project</th>*@
                                        <th>Link</th>
                                        <th>Link</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var user in Model)
                                    {

                                        <tr>
                                            <td class="avartar"><img src="@user.AvatarUrl" class="img" width="50" /></td>

                                            <td>@Html.DisplayFor(modelItem => user.Email)</td>

                                            <td>@Html.DisplayFor(modelItem => user.FirstName)</td>

                                            <td>@Html.DisplayFor(modelItem => user.LastName)</td>

                                            <td>@roleHelper.ListUserRoles(user.Id).FirstOrDefault()</td>

                                            @*<td>@projectHelper.ListUserProjects(user.Id).FirstOrDefault(Model.FirstO)</td>*@

                                            <td>@Html.ActionLink("Manage User", "ManageUserRole", "Admin", new { userId = user.Id }, null)</td>

                                            <td>
                                                @Html.ActionLink("Assign User to a Project", "ManageProjects", "Admin", new { userId = user.Id }, null)<br>
                                                @Html.ActionLink("Assign User to Projects", "ManageUserProjects", "Admin", new { userId = user.Id }, null)
                                            </td>

                                        </tr>
                                    }
                                </tbody>
                            </table>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        
    </div>

